<ion-content [fullscreen]="true">
  <div class="practice-detail-header">
    <ion-icon (click)="goBack()" name="arrow-back-circle-outline" class="back-icon"></ion-icon>
    <span class="header-title">{{ practice()?.name || 'Cargando...' }}</span>
    <div style="width: 24px;"></div>
  </div>

  <div class="tracker-content">

    <div class="progress-summary">
      <div class="summary-emoji">{{ practice()?.emoji || 'üôè' }}</div>
      <div class="summary-text">
        <span class="current">{{ formatNumber(progress()?.totalRepetitions || 0) }}</span>
        <span class="total"> / {{ formatNumber(practice()?.targetRepetitions || 0) }}</span>
      </div>
      <div class="mini-progress-track">
        <div class="mini-progress-fill" [style.width.%]="progressPercentage()"></div>
      </div>
    </div>

    <div class="input-card">
      <h3 class="input-label">Sesi√≥n de Hoy</h3>

      <div class="big-counter-display">{{ currentSessionCount() }}</div>

      <p class="counter-subtitle">repeticiones</p>

      <div class="quick-actions-grid">
        <button class="quick-btn" (click)="incrementCounter(21)">
          <span class="btn-num">+21</span>
        </button>

        <button class="quick-btn primary-action" (click)="incrementCounter(108)">
          <span class="btn-icon">üìø</span>
          <span class="btn-num">+108</span>
          <span class="btn-label">1 Mala</span>
        </button>

        <button class="quick-btn" (click)="openKeypadModal()">
          <ion-icon name="keypad-outline"></ion-icon>
        </button>
      </div>
    </div>

    <button class="save-session-btn" (click)="saveSession()">
      Registrar Pr√°ctica
    </button>

    <div class="recent-history-text" *ngIf="progress()?.lastSessionRepetitions">
      √öltima sesi√≥n: <strong>{{ formatNumber(progress()?.lastSessionRepetitions || 0) }}</strong> ({{
      getLastSessionRelativeDate() }})
    </div>

  </div>
</ion-content>